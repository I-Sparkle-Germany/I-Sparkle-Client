<div ng-if="!$ctrl.showAllAnnotations" class="annotations--grading">
    <div class="annotations--grading__score annotations--grading__item" layout="row" layout-align="start-center">
        <edit-component-score
            [component-id]="$ctrl.componentId"
            [component-state-id]="$ctrl.componentStateId"
            [disabled]="$ctrl.isDisabled || !$ctrl.canGradeStudentWork"
            [from-workgroup-id]="$ctrl.fromWorkgroupId"
            [latest-annotation-score]="$ctrl.latestAnnotations.score"
            [node-id]="$ctrl.nodeId"
            [period-id]="$ctrl.periodId"
            [run-id]="$ctrl.runId"
            [to-workgroup-id]="$ctrl.toWorkgroupId"></edit-component-score>
        <span> / </span>
        <grading-edit-component-max-score [node-id]="$ctrl.nodeId"
            [component-id]="$ctrl.componentId"
            [disabled]="$ctrl.isDisabled || !$ctrl.canAuthorProject"></grading-edit-component-max-score>
    </div>
    <div ng-show="$ctrl.edit || !$ctrl.showAutoComment()" class="annotations--grading__item">
        <md-input-container class="input-container md-block md-no-float" flex>
            <label class="input-label md-no-float" ng-disabled="$ctrl.isDisabled">{{ ::'TEACHER_COMMENT' | translate }}:</label>
            <div class="input-wrapper">
                <textarea id="{{ 'commentInput_' + $ctrl.componentId + '_' + $ctrl.toWorkgroupId }}"
                          md-detect-hidden
                          placeholder="{{ ::'enterCommentHere' | translate }}"
                          ng-model="$ctrl.comment"
                          ng-disabled="$ctrl.isDisabled || !$ctrl.canGradeStudentWork"
                          ng-change="$ctrl.postAnnotation('comment')"
                          ng-model-options="{ debounce: 5000 }"></textarea>
            </div>
        </md-input-container>
    </div>
    <div ng-if="$ctrl.showAutoComment()" class="annotations--grading__item annotations--grading__auto-comment">
        <div class="heavy">
            <span class="md-no-float">{{ ::'AUTO_COMMENT' | translate }}
                <span ng-if="!$ctrl.isDisabled">(<a ng-click="$ctrl.editComment()">{{ ::'EDIT' | translate }}</a>)</span>:
            </span>
        </div>
        <div class="annotations--grading__auto-comment__content">
            <compile data="$ctrl.latestAnnotations.comment.data.value"></compile>
        </div>
    </div>
</div>

<div ng-if="$ctrl.showAllAnnotations">
    <div ng-if="$ctrl.hasNoAnnotations()"
         class="annotations--grading annotations--grading__item text-secondary"
         translate="NO_FEEDBACK_GIVEN"></div>

    <div ng-if="$ctrl.hasTeacherAnnotations()" class="annotations--grading">
        <div ng-if="$ctrl.latestAnnotations.score"
             class="annotations--grading__item annotations--grading__score"
             layout="row" layout-align="start-center">
            <edit-component-score
                [component-id]="$ctrl.componentId"
                [component-state-id]="$ctrl.componentStateId"
                [disabled]="true"
                [from-workgroup-id]="$ctrl.fromWorkgroupId"
                [latest-annotation-score]="$ctrl.latestAnnotations.score"
                [node-id]="$ctrl.nodeId"
                [period-id]="$ctrl.periodId"
                [run-id]="$ctrl.runId"
                [to-workgroup-id]="$ctrl.toWorkgroupId"></edit-component-score>
            <span> / </span>
            <grading-edit-component-max-score [node-id]="$ctrl.nodeId"
                [component-id]="$ctrl.componentId"
                [disabled]="true"></grading-edit-component-max-score>
        </div>
        <div ng-if="$ctrl.latestAnnotations.comment" class="annotations--grading__item">
            <md-input-container class="input-container md-block md-no-float"
                                flex>
                <label class="input-label md-no-float" ng-disabled="true">{{ ::'TEACHER_COMMENT' | translate }}:</label>
                <div class="input-wrapper">
                    <textarea md-detect-hidden
                              placeholder="{{ ::'enterCommentHere' | translate }}"
                              ng-model="$ctrl.latestAnnotations.comment.data.value"
                              ng-disabled="true"></textarea>
                </div>
            </md-input-container>
        </div>
    </div>

    <div class="component--grading__annotations__divider"
         ng-if="$ctrl.hasTeacherAndAutoAnnotations()"></div>

    <div ng-if="$ctrl.hasAutoAnnotations()" class="annotations--grading">
        <div ng-if="$ctrl.latestAnnotations.autoScore"
             class="annotations--grading__item annotations--grading__score"
             layout="row" layout-align="start-center">
            <edit-component-score
                [component-id]="$ctrl.componentId"
                [component-state-id]="$ctrl.componentStateId"
                [disabled]="true"
                [from-workgroup-id]="$ctrl.fromWorkgroupId"
                [latest-annotation-score]="$ctrl.latestAnnotations.autoScore"
                [node-id]="$ctrl.nodeId"
                [period-id]="$ctrl.periodId"
                [run-id]="$ctrl.runId"
                [to-workgroup-id]="$ctrl.toWorkgroupId"></edit-component-score>
            <span> / </span>
            <grading-edit-component-max-score [node-id]="$ctrl.nodeId"
                [component-id]="$ctrl.componentId"
                [disabled]="true"></grading-edit-component-max-score>
        </div>
        <div class="annotations--grading__item annotations--grading__auto-comment" ng-if="$ctrl.latestAnnotations.autoComment">
            <div class="heavy md-no-float">{{ ::'AUTO_COMMENT' | translate }}:</div>
            <div class="annotations--grading__auto-comment__content">
                <compile data="$ctrl.latestAnnotations.autoComment.data.value"></compile>
            </div>
        </div>
    </div>
</div>
