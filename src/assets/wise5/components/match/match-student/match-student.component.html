<div class="main-div">
  <component-header [componentContent]="componentContent"></component-header>
  <div class="match-content">
    <component-annotations *ngIf="mode === 'student'"
        [annotations]="latestAnnotations"
        [maxScore]="componentContent.maxScore"
        [nodeId]="nodeId"
        [componentId]="componentId">
    </component-annotations>
    <div fxLayout="row wrap">
      <div class="match-bucket match-bucket--choices"
          fxFlex="100"
          fxLayout.gt-sm="{{isHorizontal ? 50: 100}}">
        <mat-card fxFlex="100%">
          <mat-card-header>
            <mat-card-title class="match-bucket__header">
              <div style="display: flex; align-items: center;">
                <div [innerHTML]="buckets[0].value" class="starter-bucket-label"></div>
                <div *ngIf="componentContent.canCreateChoices">
                  <add-choice-button [isDiabled]="isDisabled" (onClick)="addChoice()">
                  </add-choice-button>
                </div>
              </div>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content class="match-bucket__content">
            <mat-list class="match-bucket__contents"
                [ngStyle]="choiceStyle"
                [dragula]="dragulaId"
                [(dragulaModel)]="buckets[0].items">
              <div class="match-bucket__item" *ngFor="let item of buckets[0].items">
                <match-choice-item [item]="item"
                    [hasCorrectAnswer]="hasCorrectAnswer"
                    [isDisabled]="isDisabled"
                    (onDeleteChoice)="deleteChoice(item)"></match-choice-item>
              </div>
            </mat-list>
          </mat-card-content>
        </mat-card>
        <mat-divider class="match-divider {{isHorizontal ? 'match-divider--horizontal' : ''}}"></mat-divider>
      </div>
      <div fxLayout="row wrap" fxLayoutAlign="center start"
          fxFlex="100"
          fxLayout.gt-sm="{{isHorizontal ? 50 : 100}}">
        <div *ngFor="let bucket of buckets.slice(1)"
            class="match-bucket"
            fxFlex="100"
            fxLayout.gt-sm="{{isHorizontal ? 100 : bucketWidth}}">
          <mat-card>
            <mat-card-title class="match-bucket__header">
              <mat-card-title-text>
                <span [innerHTML]="bucket.value"></span>
              </mat-card-title-text>
            </mat-card-title>
            <mat-card-content class="match-bucket__content">
              <mat-list class="match-bucket__contents"
                  ng-style="bucketStyle"
                  [dragula]="dragulaId"
                  [(dragulaModel)]="bucket.items">
                <div class="match-bucket__item" *ngFor="let item of bucket.items">
                  <match-choice-item [item]="item"
                    [hasCorrectAnswer]="hasCorrectAnswer"
                    [isDisabled]="isDisabled"
                    (onDeleteChoice)="deleteChoice(item)"></match-choice-item>
                </div>
              </mat-list>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
  <match-feedback-section [componentContent]="componentContent"
      [hasCorrectAnswer]="hasCorrectAnswer"
      [isCorrect]="isCorrect"
      [isLatestComponentStateSubmit]="isLatestComponentStateSubmit"
      [submitCounter]="submitCounter"></match-feedback-section>
  <component-save-submit-buttons *ngIf="isSaveOrSubmitButtonVisible"
      [isDirty]="isDirty"
      [isDisabled]="isDisabled"
      [isSaveButtonVisible]="isSaveButtonVisible"
      [isSubmitButtonVisible]="isSubmitButtonVisible"
      [isSubmitDirty]="isSubmitDirty"
      [saveMessage]="saveMessage"
      (saveButtonClicked)="saveButtonClicked($event)"
      (submitButtonClicked)="submitButtonClicked($event)">
  </component-save-submit-buttons>
</div>
